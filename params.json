{"name":"Dapper.FluentMap","tagline":"Provides a simple API to map POCO properties to database columns when using Dapper.","body":"[Dapper.FluentMap](http://henkmollema.github.io/Dapper-FluentMap)\r\n================\r\n\r\n[![Build status](https://ci.appveyor.com/api/projects/status/x6grw3cjuyud9c76?svg=true)](https://ci.appveyor.com/project/henkmollema/dapper-fluentmap)\r\n[![NuGet Version](http://img.shields.io/nuget/v/Dapper.FluentMap.svg?style=flat)](https://www.nuget.org/packages/Dapper.FluentMap/ \"NuGet version\")\r\n[![NuGet Downloads](http://img.shields.io/nuget/dt/Dapper.FluentMap.svg?style=flat)](https://www.nuget.org/packages/Dapper.FluentMap/)\r\n\r\n### Introduction\r\n\r\nThis [Dapper](https://github.com/SamSaffron/dapper-dot-net/) extension allows you to fluently congfigure the mapping between POCO properties and database columns. This keeps your POCO's clean of mapping attributes. The functionality is similar to [Entity Framework Fluent API](http://msdn.microsoft.com/nl-nl/data/jj591617.aspx). If you have any questions, suggestions or bugs, please don't hesitate to [contact me](mailto:henkmollema@gmail.com) or create an issue.\r\n\r\n<hr>\r\n\r\n### Download\r\n[![Download Dapper.FluentMap on NuGet](http://i.imgur.com/Rs483do.png \"Download Dapper.FluentMap on NuGet\")](https://www.nuget.org/packages/Dapper.FluentMap)\r\n\r\n<hr>\r\n\r\n### Usage\r\n#### Manual mapping\r\nYou can map property names manually using the [`EntityMap<TEntity>`](https://github.com/HenkMollema/Dapper-FluentMap/blob/master/src/Dapper.FluentMap/Mapping/EntityMap.cs) class. When creating a derived class, the constructor gives you access to the `Map` method, allowing you to specify to which database column name a certain property of `TEntity` should map to.\r\n```csharp\r\npublic class ProductMap : EntityMap<Product>\r\n{\r\n\tpublic ProductMap()\r\n\t{\r\n\t\t// Map property 'Name' to column 'strName'.\r\n\t\tMap(p => p.Name)\r\n\t\t\t.ToColumn(\"strName\");\r\n\t\t\t\r\n\t\t// Ignore the 'LastModified' property when mapping.\r\n\t\tMap(p => p.LastModified)\r\n\t\t\t.Ignore();\r\n\t}\r\n}\r\n```\r\n\r\nColumn names are mapped case sensitive by default. You can change this by specifying the `caseSensitive` parameter in the `ToColumn()` method: `Map(p => p.Name).ToColumn(\"strName\", caseSensitive: false)`.\r\n\r\n**Initialization:**\r\n```csharp\r\nFluentMapper.Intialize(config =>\r\n\t\t\t\t\t   {\r\n\t\t\t\t\t\t   config.AddMap(new ProductMap());\r\n\t\t\t\t\t   });\r\n```\r\n\r\n#### Convention based mapping\r\nWhen you have a lot of entity types, creating manual mapping classes can become plumbing. If your column names adhere to some kind of naming convention, you might be better off by configuring a mapping convention.\r\n\r\nYou can create a convention by creating a class which derives from the [`Convention`](https://github.com/HenkMollema/Dapper-FluentMap/blob/master/src/Dapper.FluentMap/Conventions/Convention.cs) class. In the contructor you can configure the property conventions:\r\n```csharp\r\npublic class TypePrefixConvention : Convention\r\n{\r\n    public TypePrefixConvention()\r\n    {\r\n        // Map all properties of type int and with the name 'id' to column 'autID'.\r\n        Properties<int>()\r\n            .Where(c => c.Name.ToLower() == \"id\")\r\n            .Configure(c => c.HasColumnName(\"autID\"));\r\n\r\n        // Prefix all properties of type string with 'str' when mapping to column names.\r\n        Properties<string>()\r\n            .Configure(c => c.HasPrefix(\"str\"));\r\n\r\n        // Prefix all properties of type int with 'int' when mapping to column names.\r\n        Properties<int>()\r\n            .Configure(c => c.HasPrefix(\"int\"));\r\n    }\r\n}\r\n```\r\n\r\nWhen initializing Dapper.FluentMap with conventions, the entities on which a convention applies must be configured. You can choose to either configure the entities explicitly or use assembly scanning.\r\n\r\n```csharp\r\nFluentMapper.Intialize(config =>\r\n    {\r\n        // Configure entities explicitly.\r\n        config.AddConvention<TypePrefixConvention>()\r\n              .ForEntity<Product>()\r\n              .ForEntity<Order>;\r\n\r\n        // Configure all entities in a certain assembly with an optional namespaces filter.\r\n        config.AddConvention<TypePrefixConvention>()\r\n              .ForEntitiesInAssembly(typeof(Product).Assembly, \"App.Domain.Model\");\r\n\r\n        // Configure all entities in the current assembly with an optional namespaces filter.\r\n        config.AddConvention<TypePrefixConvention>()\r\n              .ForEntitiesInCurrentAssembly(\"App.Domain.Model.Catalog\", \"App.Domain.Model.Order\");\r\n    });\r\n```\r\n\r\n##### Transformations\r\nThe convention API allows you to configure transformation of property names to database column names. An implementation would look like this:\r\n```csharp\r\npublic class PropertyTransformConvention : Convention\r\n{\r\n    public PropertyTransformConvention()\r\n    {\r\n        Properties()\r\n            .Configure(c => c.Transform(s => Regex.Replace(input: s, pattern: \"([A-Z])([A-Z][a-z])|([a-z0-9])([A-Z])\", replacement: \"$1$3_$2$4\")));\r\n    }\r\n}\r\n```\r\n\r\nThis configuration will map camel case property names to underscore seperated database column names (`UrlOptimizedName` -> `Url_Optimized_Name`).\r\n\r\n<hr>\r\n\r\n### [Dommel](https://github.com/HenkMollema/Dommel)\r\nDommel contains a set of extensions methods providing easy CRUD operations using Dapper. One of the goals was to provide extension points for resolving table and column names. [Dapper.FluentMap.Dommel](https://github.com/HenkMollema/Dapper-FluentMap/tree/master/src/Dapper.FluentMap.Dommel) implements certain interfaces of Dommel and uses the configured mapping. It also provides more mapping functionality.\r\n\r\n#### [`PM> Install-Package Dapper.FluentMap.Dommel`](https://www.nuget.org/packages/Dapper.FluentMap.Dommel)\r\n\r\n#### Usage\r\n##### `DommelEntityMap<TEntity>`\r\nThis class derives from `EntityMap<TEntity>` and allows you to map an entity to a database table using the `ToTable()` method:\r\n\r\n```csharp\r\npublic class ProductMap : DommelEntityMap<TEntity>\r\n{\r\n\tpublic ProductMap()\r\n\t{\r\n\t\tToTable(\"tblProduct\");\t\t\r\n\t\t\r\n\t\t// ...\r\n\t}\r\n}\r\n```\r\n\r\n##### `DommelPropertyMap<TEntity>`\r\nThis class derives `PropertyMap<TEntity>` and allows you to specify the key property of an entity using the `IsKey` method:\r\n\r\n```csharp\r\npublic class ProductMap : DommelEntityMap<TEntity>\r\n{\r\n\tpublic ProductMap()\r\n\t{\r\n\t\tMap(p => p.Id).IsKey();\r\n\t}\r\n}\r\n```\r\n\r\nYou can configure Dapper.FluentMap.Dommel in the `FluentMapper.Initialize()` method:\r\n\r\n```csharp\r\nFluentMapper.Intialize(config =>\r\n\t\t\t\t\t   {\r\n\t\t\t\t\t\t   config.AddMap(new ProductMap());\r\n\t\t\t\t\t\t   config.ForDommel();\r\n\t\t\t\t\t   });\r\n```\r\n","google":"UA-50793047-1","note":"Don't delete this file! It's used internally to help with page regeneration."}